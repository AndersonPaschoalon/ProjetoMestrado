# SIMITAR: SniffIng ModellIng and TrAffic geneRation

SIMITAR stands for SIMITAR: SnIffing, ModellIng and TrAffic geneRation. SIMITAR is a tool for creating synthetic and realist network traffic. It uses actual netowork traffic (live captures or pcap files) for creating a flow-oriented traffic model. This model is used for creating network traffic, and is provided as parameter for the traffic generator. It is self-configurated because you dont have to care about adjusting stochastic parameters such as exponenetial rates, protocol, ports, or traffic rates as input parameters. It is all contained inside te traffic model created.

![](https://github.com/AndersonPaschoalon/ProjetoMestrado/blob/master/SIMITAR/data/misc/digram-project-cycle.png)

The traffic generator is not attached to a especific technology. It has a flow scheduler, which creates a thread for each flow. As traffic generator engine we can use from applications to low-level C/C++ lybraries. Currently we have extended it to [Libtins](http://libtins.github.io/)(C++ packet frafter lyrbrary) and [Iperf](https://iperf.fr/).  

![](https://github.com/AndersonPaschoalon/ProjetoMestrado/blob/master/SIMITAR/data/misc/arch1.svg)


## Components and apps

SIMITAR is composed of 4 components:

- Sniffer (sniffer/sniffer-cli.py or bin/simitar-sniffer) : 
- Database (data/db/Trace.db)
- Trace Analyzer (trace-analyzer/trace-analyzer or bin/trace-analyzer)
- Traffic Generator (simitar-gen/simitar-gen or bin/simitar-gen)

![](https://github.com/AndersonPaschoalon/ProjetoMestrado/blob/master/SIMITAR/data/misc/architecture-diagram.pdf)

Before executing any command, you must load the enviroment variables:
```
source data/config/simitar-workspace-config.sh
```
Sniffer works collecting information about an input traffic such as a pcap file
or a live traffic, and stores it in a sqlite3 database. It can be executed on
the directory sniffer/. Eg.:
```
./sniffer-cli.py new "intrig-traffic" live eth0
```
Trace Analyzer creates a compact trace descriptor in XML file using a saved 
in the database. It salves the xml on the directory data/xml/. It can be 
executed on the directory trace-analyzer/. Eg.:
```
./trace-analyzer --trace "intrig-traffic"
```
The traffic generator simitar-gen is able to create traffic based on the model
created by the traffic generator. It can be executed on the directory 
simitar-gen/. To generate and receive the traffic, execute:
```
sudo -E ./simitar-gen --tool iperf --mode client --ether eth0 --xml ../data/xml/intrig-traffic.sec.xml --dst-ip 10.0.0.2
sudo -E ./simitar-gen --tool tins --mode client --ether eth0 --xml ../data/xml/intrig-traffic.sec.xml
sudo -E ./simitar-gen --tool iperf --mode server --ether eth0 --xml ../data/xml/intrig-traffic.sec.xml
```
Iperf and D-ITG  require the use of a client and a server, since it creates a 
connection before sending any packets. Others tools like tins, require
just the operation as a client, since since it crafts packets "on the wire".

## Directories and files



- build.py 
Build the SIMITAR apps
```
./build --build		# build SIMITAR
./build --clean		# clean 
./build --remake	# clean and build
```

- data/
Directory to store SIMITAR data.
	* config: enviroment variables and dependencies scripts.
	* csv: directory to store csv files of IP/MAC addrs.
	* db: Stores the Trace.db file
	* log: store the logfiles generated by the components
	* test: store files used by the unity and integration tests.
	* xml: stores the Compact Trace Descriptors files.

- desps/
Third parties software code

- libsimitar/
SIMITAR library and classes

- pcaps/
Used to store pcap files

- README.md
This description

- simitar-gen/
Simitar traffic generator directory

- tests/
Unity and integration testes

- trace-analyzer/
Trace Analyzer directory










